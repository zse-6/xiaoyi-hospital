<view class="body-map-container">
  <!-- æ ‡é¢˜ï¼ˆæ›¿æ¢textæ ‡ç­¾ä¸ºviewï¼Œç»‘å®šç±»é€‰æ‹©å™¨ï¼‰ -->
  <view class="body-map-header" wx:if="{{showHeader !== false}}">
    <view class="title">äººä½“å›¾ç¤º</view>
    <view class="subtitle">ç‚¹å‡»èº«ä½“éƒ¨ä½é€‰æ‹©ç›¸å…³ç—‡çŠ¶</view>
  </view>
  
  <!-- äººä½“å›¾ç¤º -->
  <view class="body-map">
    <block wx:for="{{bodyParts}}" wx:key="id">
      <view 
        class="body-part {{selectedIds.includes(item.id) ? 'selected' : ''}}"
        style="left: {{item.position.x}}%; top: {{item.position.y}}%; width: {{item.size}}rpx; height: {{item.size}}rpx;"
        bindtap="onBodyPartTap"
        data-id="{{item.id}}"
        hover-class="body-part-hover"
        hover-stay-time="100"
        wx:if="{{!disabled}}"
      >
        <view class="part-icon">{{item.icon}}</view>
        <view class="part-name">{{item.name}}</view> <!-- æ›¿æ¢textä¸ºviewï¼Œç»‘å®šç±»é€‰æ‹©å™¨ -->
      </view>
      <!-- ç¦ç”¨çŠ¶æ€æ ·å¼ -->
      <view 
        class="body-part disabled"
        style="left: {{item.position.x}}%; top: {{item.position.y}}%; width: {{item.size}}rpx; height: {{item.size}}rpx;"
        wx:else
      >
        <view class="part-icon">{{item.icon}}</view>
        <view class="part-name">{{item.name}}</view> <!-- æ›¿æ¢textä¸ºviewï¼Œç»‘å®šç±»é€‰æ‹©å™¨ -->
      </view>
    </block>
    
    <!-- äººä½“è½®å»“ï¼ˆèƒŒæ™¯ï¼‰ -->
    <view class="body-outline">
      <view class="outline-text">ğŸ‘¤</view> <!-- æ›¿æ¢textä¸ºviewï¼Œç»‘å®šç±»é€‰æ‹©å™¨ -->
    </view>
  </view>
  
  <!-- éƒ¨ä½æè¿° -->
  <view class="part-description" wx:if="{{selectedParts.length > 0}}">
    <block wx:for="{{selectedParts}}" wx:key="id">
      <view class="description-item">
        <view class="desc-icon">{{item.icon}}</view> <!-- æ›¿æ¢textä¸ºviewï¼Œç»‘å®šç±»é€‰æ‹©å™¨ -->
        <view class="desc-content">
          <view class="desc-title">{{item.name}}</view> <!-- æ›¿æ¢textä¸ºviewï¼Œç»‘å®šç±»é€‰æ‹©å™¨ -->
          <view class="desc-text" style="white-space: pre-line;">{{item.displayDesc || item.description}}</view> <!-- æ›¿æ¢textä¸ºviewï¼Œç»‘å®šç±»é€‰æ‹©å™¨ -->
        </view>
      </view>
    </block>
  </view>
  
  <!-- æ“ä½œæŒ‰é’®ï¼ˆæ›¿æ¢textæ ‡ç­¾ä¸ºviewï¼Œç»‘å®šç±»é€‰æ‹©å™¨ï¼‰ -->
  <view class="action-buttons" wx:if="{{selectedParts.length > 0 && !disabled}}">
    <view class="action-btn clear-btn" bindtap="clearSelection">
      <view class="action-btn-text">ğŸ—‘ï¸ æ¸…é™¤é€‰æ‹©</view>
    </view>
  </view>
  
  <!-- ç—‡çŠ¶é€‰æ‹©å¼¹çª— -->
  <view class="symptom-modal" wx:if="{{showSymptomModal}}">
    <view class="modal-overlay" bindtap="closeSymptomModal"></view>
    <view class="modal-content">
      <view class="modal-header">
        <view class="modal-title">é€‰æ‹©ç—‡çŠ¶</view> <!-- æ›¿æ¢textä¸ºviewï¼Œç»‘å®šç±»é€‰æ‹©å™¨ -->
        <view class="modal-close" bindtap="closeSymptomModal">
          <view class="modal-close-text">Ã—</view> <!-- æ›¿æ¢textä¸ºviewï¼Œç»‘å®šç±»é€‰æ‹©å™¨ -->
        </view>
      </view>
      
      <view class="modal-body">
        <view class="modal-subtitle"> <!-- æ›¿æ¢textä¸ºviewï¼Œç»‘å®šç±»é€‰æ‹©å™¨ -->
          è¯·é€‰æ‹©{{currentPartName}}çš„ç—‡çŠ¶
        </view>
        
        <view class="symptoms-list">
          <block wx:for="{{currentSymptoms}}" wx:key="name">
            <view 
              class="symptom-item {{item.isSelected ? 'selected' : ''}}" 
              bindtap="onSymptomSelect"
              data-symptom="{{item.name}}"
            >
              <view class="symptom-item-text">{{item.name}}</view> <!-- æ›¿æ¢textä¸ºviewï¼Œç»‘å®šç±»é€‰æ‹©å™¨ -->
            </view>
          </block>
        </view>
      </view>
    </view>
  </view>
</view>